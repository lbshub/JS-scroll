/**
 * LBS scroll 
 * Date: 2012-5-18 
 **/
!function(a,b){"use strict";var c={linear:function(a){return a},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)},wobble:function(a){return-Math.cos(a*Math.PI*(9*a))/2+.5},swing:function(a){return.5-Math.cos(a*Math.PI)/2},bounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeIn:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOut:function(a){return Math.sin(a*(Math.PI/2))},easeInOut:function(a){return-.5*(Math.cos(Math.PI*a)-1)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,.25)},easeOutBounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*(a*a*(((b*=1.525)+1)*a-b)):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*Math.pow(a,2):-.5*((a-=2)*a-2)},easeInOutCubic:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)}},d=function(a){a=a||{},void 0!==a.el&&(this.wrapper="string"==typeof a.el?b.getElementById(a.el):a.el,this.scroller=this.wrapper.children[0],this.elements=this.scroller.children,this.length=this.elements.length,this.count=a.count||1,this.width=a.width||parseInt(this.elements[0].offsetWidth),this.amount=a.amount||Math.floor(this.wrapper.offsetWidth/this.width),this.amount>this.length&&(this.amount=this.length),this.count>this.amount&&(this.count=this.amount),this.distance=this.count*this.width,this.totalWidth=this.width*this.length+this.distance,this.duration=a.duration||400,this.easing=a.easing&&c[a.easing]||c.linear,this.auto=a.auto||!1,this.auto&&(this.delay=a.delay||5e3),this._init())};d.prototype={_init:function(){this._initSet(),this._bind()},_initSet:function(){this.scroller.style.left=0,this.scroller.style.width=this.totalWidth+"px",this.els=[];for(var a=0;a<this.length;a++)this.els.push(this.elements[a])},_bind:function(){var a=this;this.auto&&(this.play(),this.on(this.wrapper,"mouseover",function(){a.stop()}),this.on(this.wrapper,"mouseout",function(){a.play()}))},_animate:function(a,b,c,d){var e=parseInt(a.style[b]),f=c,g=f-e,h=this.duration,i=this.easing,j=+new Date;!function k(){var c=+new Date,l=c-j,m=i(l/h);a.style[b]=e+m*g+"px",l>h?(a.style[b]=f+"px",d&&d()):setTimeout(k,20)}()},scrollLeft:function(){if(!this.amimated){this.amimated=!0;for(var a=this,b=0;b<this.count;b++){var c=this.els.shift(),d=c.cloneNode(!0);this.els.push(c),this.scroller.appendChild(d)}this._animate(this.scroller,"left",-this.distance,function(){for(a.scroller.style.left=0,b=0;b<a.count;b++)a.scroller.removeChild(a.scroller.children[0]);a.amimated=!1})}},scrollRight:function(){if(!this.amimated){this.amimated=!0;for(var a=this,b=0;b<this.count;b++){var c=this.els.pop(),d=c.cloneNode(!0);this.els.unshift(c),this.scroller.insertBefore(d,this.scroller.children[0])}this.scroller.style.left=-this.distance+"px",this._animate(this.scroller,"left",0,function(){for(b=0;b<a.count;b++)a.scroller.removeChild(a.scroller.children[a.scroller.children.length-1]);a.amimated=!1})}},play:function(){var a=this;this.timer=setInterval(function(){a.scrollLeft()},this.delay)},stop:function(){this.timer&&clearInterval(this.timer),this.timer=null},on:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}},"function"==typeof define&&define.amd?define("Scroll",[],function(){return d}):a.Scroll=d}(window,document);